# 快速测试指南

## 🧪 测试步骤

### 1. 基础功能测试

```bash
# 构建并安装
cd Simple-Voice-Recorder
./gradlew assembleDebug
adb install -r app/build/outputs/apk/debug/app-debug.apk
```

**测试项目：**
- ✅ 应用正常启动
- ✅ 权限申请（录音权限）
- ✅ 电池优化弹窗显示
- ✅ 界面显示正常（黑色背景 + 录音按钮）

### 2. 录音功能测试

**开始录音：**
1. 点击麦克风按钮
2. 观察界面变化：
   - 按钮变为停止图标
   - 显示录音时长（从 00:00:00 开始）
   - 显示红色指示点
   - 状态文本显示"Recording"

**停止录音：**
1. 再次点击按钮
2. 观察界面变化：
   - 按钮变回麦克风图标
   - 时长和指示点消失
   - 状态文本显示"Ready to record"
   - **无任何提示音或Toast**

### 3. 静默性测试

**检查项目：**
- ❌ 开始录音时无提示音
- ❌ 停止录音时无提示音
- ❌ 无振动反馈
- ✅ 通知栏图标最小化（可能看到一个很小的通知）
- ❌ 无录音完成的Toast提示

### 4. 文件存储测试

**检查录音文件：**
```bash
# 查看隐藏目录中的文件
adb shell ls -la /storage/emulated/0/Android/data/com.simplemobiletools.voicerecorder/files/.recordings/

# 拉取文件到电脑
adb pull /storage/emulated/0/Android/data/com.simplemobiletools.voicerecorder/files/.recordings/ ./test_recordings/

# 播放验证
# 使用任意音频播放器打开文件，确认录音内容正常
```

**验证点：**
- ✅ 文件保存在 `.recordings` 隐藏目录
- ✅ 文件名为时间戳格式（如：1703345678901.m4a）
- ✅ 文件可以正常播放
- ✅ 录音内容清晰

### 5. 息屏/锁屏测试

**测试流程：**
1. 启动应用并开始录音
2. 按电源键息屏
3. 等待 30 秒
4. 唤醒屏幕，解锁
5. 回到应用，观察录音是否继续
6. 停止录音并检查文件

**验证点：**
- ✅ 息屏期间录音不中断
- ✅ 时长正常增长
- ✅ 录音内容完整（包含息屏期间的声音）
- ✅ 通知栏有静默通知

**锁屏测试：**
1. 开始录音
2. 锁屏并放置 5 分钟
3. 解锁查看
4. 停止并验证文件

### 6. 后台运行测试

**测试场景：**
1. 开始录音
2. 按 Home 键回到桌面
3. 打开其他应用（如浏览器、游戏）
4. 使用 5-10 分钟
5. 返回录音应用
6. 验证录音是否继续

**验证点：**
- ✅ 后台不被系统杀掉
- ✅ 录音持续进行
- ✅ 时长正常累计

### 7. 长时间录音测试

**测试步骤：**
1. 开始录音
2. 息屏并放置 30 分钟到 1 小时
3. 唤醒屏幕检查
4. 停止录音并验证文件

**验证点：**
- ✅ 长时间录音不中断
- ✅ 文件大小合理
- ✅ 播放正常，无损坏

### 8. 厂商系统适配测试

**小米手机测试：**
```
设置 → 应用设置 → 应用管理 → Voice Recorder
- 省电策略：无限制 ✅
- 自启动：已开启 ✅
- 后台弹出界面：已允许 ✅
```

进行息屏录音测试，验证不被 MIUI 杀后台。

**华为手机测试：**
```
设置 → 应用和服务 → 应用管理 → Voice Recorder
- 启动管理：手动管理（全部开启）✅
- 电池：允许后台运行 ✅
```

进行长时间后台录音测试。

### 9. 极限场景测试

**低电量测试：**
- 电量低于 20% 时开始录音
- 观察是否被系统限制

**内存压力测试：**
- 同时运行多个大型应用
- 观察录音服务是否被杀

**频繁切换测试：**
- 快速切换应用
- 反复息屏/亮屏
- 验证录音稳定性

## 📊 测试报告模板

```
测试日期：____________________
测试设备：____________________
系统版本：____________________
应用版本：v1.0.0

| 测试项目 | 结果 | 备注 |
|---------|------|------|
| 基础启动 | ✅/❌ |  |
| 权限申请 | ✅/❌ |  |
| 开始录音 | ✅/❌ |  |
| 停止录音 | ✅/❌ |  |
| 静默性 | ✅/❌ |  |
| 文件存储 | ✅/❌ |  |
| 息屏录音 | ✅/❌ |  |
| 锁屏录音 | ✅/❌ |  |
| 后台运行 | ✅/❌ |  |
| 长时间录音 | ✅/❌ |  |

其他问题：
_________________________________
```

## 🐛 已知问题

1. **通知栏图标无法完全隐藏**
   - Android 8.0+ 系统限制
   - 已最小化显示

2. **某些厂商系统需要手动设置**
   - 小米、华为等需要额外配置
   - 见使用说明文档

## ✅ 测试通过标准

- ✅ 所有基础功能正常
- ✅ 息屏录音不中断
- ✅ 无任何音效提示
- ✅ 文件正确保存到隐藏目录
- ✅ 至少 30 分钟长时间录音稳定
- ✅ 后台运行不被杀（主流厂商系统）

